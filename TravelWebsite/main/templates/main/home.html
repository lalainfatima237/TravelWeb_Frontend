{% extends "base.html" %}
{% load static %}

{% block content %}

<!-- Carousel -->
<div id="carouselExampleDark" class="carousels carousel-dark slide" data-bs-ride="carousel">
  <div class="carousel-inner">
    {% for dest in destinations %}
    <div class="carousel-item {% if forloop.first %}active{% endif %}">
      <img src="{{ dest.image.url }}" class="d-block w-100" alt="{{ dest.name }}">
      <div class="img-overlay">
        <p>Explore {{ dest.name }}</p>
        <h2><span>{{ dest.country }}</span></h2>
        <h2>{{ dest.description|truncatewords:10 }}</h2>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<!-- Popular Tours -->
<section id="choose-place">
  <div class="container">
    <p class="heading-normal-text">CHOOSE YOUR PLACE</p>
    <h2 class="headings">POPULAR <span>TOURS </span></h2>
    <div class="choose-wrapper">
      {% for tour in tours %}
      <div class="img-left-side">
        <div class="lg-img">
          <img src="{{ tour.image.url }}" alt="{{ tour.title }}">
          <div class="img-content">
            <h2>{{ tour.title }}</h2>
            <div class="hidden-content">
              <span><i class="fa fa-clock"></i> {{ tour.duration }}</span>
              <span><i class="fa fa-user"></i>12+</span>
              <span><i class="fa fa-location-dot"></i>{{ tour.destination.name }}</span>
            </div>
          </div>
          <div class="price-label">
            <p>${{ tour.price }}</p>
          </div>
        </div>
      </div>
      {% empty %}
      <p>No tours available right now.</p>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Blogs -->
<section id="top destination">
  <div class="container">
    <p class="heading-normal-text">TOP DESTINATION</p>
    <h2 class="headings">LATEST <span>BLOGS</span></h2>
    <div class="row">
      {% for blog in blogs %}
      <div class="col-md-4">
        <div class="card">
          <img src="{{ blog.image.url }}" class="card-img-top" alt="{{ blog.title }}">
          <div class="card-body">
            <h5 class="card-title">{{ blog.title }}</h5>
            <p class="card-text">{{ blog.content|truncatewords:20 }}</p>
            <a href="{% url 'blog_detail' blog.id %}" class="btn btn-primary">Read More</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Reviews -->
<section id="testimonials">
  <div class="container">
    <p class="heading-normal-text">WHAT OUR CUSTOMERS SAY</p>
    <h2 class="headings">TRAVEL EXPERIENCE</h2>
    <div class="row">
      {% for review in reviews %}
      <div class="col-md-4">
        <div class="testimonails-content">
          <p class="Lead">
            <i class="fa-solid fa-quote-left"></i>
            {{ review.comment|truncatewords:25 }}
            <i class="fa-solid fa-quote-right"></i>
          </p>
          <div class="icons">
            {% for i in "12345"|make_list %}
              <i class="fa-solid fa-star {% if forloop.counter <= review.rating %}text-warning{% endif %}"></i>
            {% endfor %}
            <p>{{ review.user.username }}</p>
            <p class="guest">Guest Review</p>
          </div>
        </div>
      </div>
      {% empty %}
      <p>No reviews yet.</p>
      {% endfor %}
    </div>
  </div>
</section>

{% endblock %}
